worker_type: io_uring

# Set cpu pinning, accepted values:
# - cpu number, starting from 0 (ie. 0, 1, 2)
# - cpu range, starting from 0 (ie. 2-12)
# - all, will use all the available cpus
cpus:
  - all

# Suggested 2 thread per cpu, depending on the hardware up to 4 threads still scale well
threads_per_cpus: 2

run_in_foreground: false

pidfile_path: /var/run/cachegrand.pid

network_max_clients: 0
network_listen_backlog: 0
storage_max_partition_size_mb: 0
memory_max_keys: 0

protocols:
  - type: redis
    timeout:
      connection: 2000
      read: 2000
      write: 2000
      inactivity: 10000
    keepalive:
      time: 0
      interval: 0
      probes: 0
    redis:
      max_key_length: 8192
      max_command_length: 0
    bindings:
      - host: 0.0.0.0
        port: 12345
      - host: "::"
        port: 12345

# LOGS
# ---
# type:     console or file
# level:    array of flags: debug, verbose, info, warning, recoverable, error
#           it's possible to negate a flag prefixing it with no- (ie. no-debug)
#           possible to select all the flags using the keyword all
#
# For type file
# file:
#   path:   path to the log file

logs:
  - type: console
    level: [ error, warning ]

  - type: file
    level: [ all, no-debug, no-verbose ]
    file:
      path: /var/log/cachegrand.log
